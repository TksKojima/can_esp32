"use strict";(self["webpackChunkcan_webapp"]=self["webpackChunkcan_webapp"]||[]).push([[443],{3066:function(t,s,i){i.r(s),i.d(s,{default:function(){return _}});var c=function(){var t=this,s=t._self._c;return s("div",{staticClass:"about"},[t._v(" "+t._s(t.timecnt)+" "+t._s(t.connect_status)+" "),s("table",{staticClass:"table table-hover",attrs:{"aria-describedby":"listhelp"}},[s("thead",[s("tr",[s("th",{staticStyle:{cursor:"pointer"},on:{click:function(s){return t.sortMsg(0,1)}}},[t._v("ID "+t._s(t.sort_direction_str[0])+" ")]),s("th",{staticStyle:{cursor:"pointer"},on:{click:function(s){return t.sortMsg(1,1)}}},[t._v("dlc "+t._s(t.sort_direction_str[1])+" ")]),s("th",{staticStyle:{cursor:"pointer"},on:{click:function(s){return t.sortMsg(2,1)}}},[t._v("time"+t._s(t.sort_direction_str[2])+" ")]),s("th",[t._v("data0")]),s("th",[t._v("data1")]),s("th",[t._v("data2")]),s("th",[t._v("data3")]),s("th",[t._v("data4")]),s("th",[t._v("data5")]),s("th",[t._v("data6")]),s("th",[t._v("data7")]),s("th",[t._v("delay")])])]),s("tbody",t._l(t.id_num,(function(i){return s("tr",{key:i},[s("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)},attrs:{scope:"row"}},[t._v(t._s(t.can_msgs[i].id))]),s("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)}},[t._v(" "+t._s(t.can_msgs[i].dlc))]),s("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)}},[t._v(" "+t._s(t.can_msgs[i].cycle))]),t._l(8,(function(c){return s("td",{key:c,style:{color:t.colorStr(t.can_msgs[i].updatecount_data[c-1])}},[t._v(t._s(t.can_msgs[i].data[c-1]))])})),s("td",[t._v(" "+t._s(t.can_msgs[i].updatecount))])],2)})),0)])])},n=[],e=(i(7658),{data(){return{selectItem:{name:"",mac:""},can_dlc:0,can_msgs:[],can_msg:{id:0,dlc:0,data:[0,0,0,0,0,0,0,0],cycle:-1,updatetime:0,updatecount:-1,updatecount_data:[0,0,0,0,0,0,0,0]},onrec_time:0,can_msgs_sort:[],can_id_array:[],timecnt:0,myStyle:"RGB(10,0,200)",exist_list:[],id_list:[],id_list_num:0,id_num:0,sort_direction_id:1,sort_direction_dlc:1,sort_direction_time:1,sort_direction_str:["↑↓","↑↓","↑↓"],sort_target:-1,sort_cnt:0,connect_status:-1}},mounted(){setInterval(this.intervalFunc1000,500),setInterval(this.intervalFunc3000,3e3),console.log("Starting connection to WebSocket Server");for(let t=0;t<2047;t++)this.exist_list[t]=-1,this.can_msg.id=-1,this.can_msgs[t]=Object.assign({},this.can_msg);this.websocketconnect()},computed:{},methods:{colorStr:function(t){var s=2*t;s>10&&(s=10);var i=s.toString(16);return"#"+i+i+i},websocketconnect:function(){this.connection=new WebSocket("ws://192.168.10.108:81/"),this.connection.onmessage=t=>{var s=JSON.parse(t.data)["canmsg"];this.sortOutCanMsg(s)},this.connection.onopen=function(t){console.log(t),console.log("Successfully connected to the echo websocket server...")}},intervalFunc1000:function(){this.connect_status=this.connection.readyState,this.connect_status,this.timecnt=this.timecnt+1;for(let i=0;i<this.id_num;i++){var t=new Date,s=(t.getTime()-this.can_msgs[i].updatetime)/1e3;s>this.can_msgs[i].cycle&&(this.can_msgs[i].updatecount=s);for(let t=0;t<this.can_msgs[i].dlc;t++)this.can_msgs[i].updatecount_data[t]=this.can_msgs[i].updatecount_data[t]+1}},intervalFunc3000:function(){this.sortMsg(this.sort_target,0)},sortOutCanMsg:function(t){console.log(t[0].rxnum,t.length);for(let c=1;c<t.length;c++)if("data"in t[c]){var s,i=this.can_msgs.findIndex((s=>s.id===t[c].id));if(-1==i)this.can_msgs[this.id_num].id=t[c].id,this.can_msgs[this.id_num].dlc=t[c].dlc,this.can_msgs[this.id_num].cycle=t[c].cycle/1e3,s=new Date,this.can_msgs[this.id_num].updatetime=s.getTime(),this.can_msgs[this.id_num].updatecount=0,this.can_msgs[this.id_num].data=Object.assign({},t[c].data),this.can_msgs[this.id_num].updatecount_data=Object.assign({},this.can_msgs[this.id_num].updatecount_data),this.id_num++,this.can_msgs_sort=this.can_msgs,this.exist_list[t[c].id]=t[c].id,this.id_list.push(t[c].id);else{this.can_msgs[i].id=t[c].id,this.can_msgs[i].dlc=t[c].dlc,this.can_msgs[i].cycle=t[c].cycle/1e3,s=new Date,this.can_msgs[i].updatetime=s.getTime(),this.can_msgs[i].updatecount=0;for(let s=0;s<this.can_msgs[i].dlc;s++)this.can_msgs[i].data[s]!=t[c].data[s]&&(this.can_msgs[i].updatecount_data[s]=0);this.can_msgs[i].data=Object.assign({},t[c].data)}}},sortFuncId:function(t,s){return t.id<s.id?-1*this.sort_direction_id:t.id>s.id?1*this.sort_direction_id:t.cycle+t.updatecount<s.cycle+s.updatecount?-1*this.sort_direction_time:t.cycle+t.updatecount>s.cycle+s.updatecount?1*this.sort_direction_time:0},sortFuncDlc:function(t,s){return t.dlc<s.dlc?-1*this.sort_direction_dlc:t.dlc>s.dlc?1*this.sort_direction_dlc:t.id<s.id?-1*this.sort_direction_id:t.id>s.id?1*this.sort_direction_id:0},sortFuncTime:function(t,s){return t.cycle+t.updatecount<s.cycle+s.updatecount?-1*this.sort_direction_time:t.cycle+t.updatecount>s.cycle+s.updatecount?1*this.sort_direction_time:t.id<s.id?-1*this.sort_direction_id:t.id>s.id?1*this.sort_direction_id:0},sort_direction_strfunc:function(t){return-1==t?"↓":"↑"},sortMsg:function(t,s){if(-1!=t){if(console.log("sort"),this.sort_cnt++,this.sort_direction_str=["↑↓","↑↓","↑↓"],0==t){0==this.sort_target&&1==s&&(this.sort_direction_id*=-1);var i=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncId);this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_id)}else 1==t?(1==this.sort_target&&1==s&&(this.sort_direction_dlc*=-1),i=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncDlc),this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_dlc)):(2==this.sort_target&&1==s&&(this.sort_direction_time*=-1),i=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncTime),this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_time));this.sort_target=t;for(let t=0;t<this.id_num;t++)this.can_msgs[t]=Object.assign({},i[t])}}}}),o=e,r=i(1001),a=(0,r.Z)(o,c,n,!1,null,null,null),_=a.exports}}]);
//# sourceMappingURL=about.fc5c4586.js.map