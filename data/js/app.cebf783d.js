(function(){"use strict";var t={7220:function(t,e,s){var i=s(144),n=s(998),r=s(3059),o=function(){var t=this,e=t._self._c;return e(n.Z,[e(r.Z,[e("router-view")],1)],1)},c=[],a={name:"App",data:()=>({})},l=a,u=s(1001),_=(0,u.Z)(l,o,c,!1,null,null,null),d=_.exports,h=s(8345),m=s(266),g=s(2150),f=s(1713),p=s(1023),v=s(5985),b=function(){var t=this,e=t._self._c;return e("div",[e(g.Z,[e(f.Z,[e(m.Z,{attrs:{cols:"12",sm:"2"}},[e(f.Z,[e(m.Z,{attrs:{cols:"6",sm:"12"}},[e(p.Z,{attrs:{label:"CAN受信"},model:{value:t.toggle_rx_msg,callback:function(e){t.toggle_rx_msg=e},expression:"toggle_rx_msg"}})],1),e(m.Z,{attrs:{cols:"6",sm:"12"}},[e(v.Z,{attrs:{label:"IDフィルタ",placeholder:"ex: 0x01, 0x0Y-0x0X, 0xZZ"},on:{blur:function(e){return t.idFilterInput(t.idfilter_val)}},model:{value:t.idfilter_val,callback:function(e){t.idfilter_val=e},expression:"idfilter_val"}})],1)],1),e(f.Z,[e(m.Z,{attrs:{cols:"5",sm:"12"}},[e(p.Z,{attrs:{label:`自動ソート: ${t.sortTargetStr()}   `},model:{value:t.toggle_sort,callback:function(e){t.toggle_sort=e},expression:"toggle_sort"}})],1),e(m.Z,{attrs:{cols:"4",sm:"12"}},[e(p.Z,{attrs:{label:"16進表示"},model:{value:t.toggle_hex,callback:function(e){t.toggle_hex=e},expression:"toggle_hex"}})],1),e(m.Z,{attrs:{cols:"3",sm:"12"}},[e(v.Z,{staticClass:"centered-input",attrs:{value:t.timecnt,label:"動作カウント",disabled:""}})],1)],1)],1),e(m.Z,{attrs:{cols:"12",sm:"10"}},[e("table",{staticClass:"table table-hover",attrs:{"aria-describedby":"listhelp"}},[e("thead",[e("tr",[e("th",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sortMsg(0,1)}}},[t._v("ID "+t._s(t.sort_direction_str[0])+" ")]),e("th",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sortMsg(1,1)}}},[t._v("dlc "+t._s(t.sort_direction_str[1])+" ")]),e("th",{staticStyle:{cursor:"pointer"},on:{click:function(e){return t.sortMsg(2,1)}}},[t._v("time"+t._s(t.sort_direction_str[2])+" ")]),e("th",[t._v("data0")]),e("th",[t._v("data1")]),e("th",[t._v("data2")]),e("th",[t._v("data3")]),e("th",[t._v("data4")]),e("th",[t._v("data5")]),e("th",[t._v("data6")]),e("th",[t._v("data7")]),e("th",[t._v("delay")])])]),e("tbody",t._l(t.id_num,(function(s,i){return e("tr",{key:s},[e("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)},attrs:{scope:"row"}},[t._v(" "+t._s(t.toggleDecOrHex(t.can_msgs[i].id)))]),e("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)}},[t._v(" "+t._s(t.can_msgs[i].dlc))]),e("td",{style:{color:t.colorStr(t.can_msgs[i].updatecount)}},[t._v(" "+t._s(t.can_msgs[i].cycle))]),t._l(8,(function(s){return e("td",{key:s,style:{color:t.colorStr(t.can_msgs[i].updatecount_data[s-1])}},[t._v(" "+t._s(t.toggleDecOrHex(t.can_msgs[i].data[s-1]))+" ")])})),e("td",[t._v(" "+t._s(t.can_msgs[i].updatecount))])],2)})),0)])])],1)],1)],1)},x=[],y=(s(7658),s(2003)),Z={beforeRouteLeave(t,e,s){this.$destroy(),s()},data(){return{selectItem:{name:"",mac:""},can_dlc:0,can_msgs:[],can_msg:{id:0,dlc:0,data:[0,0,0,0,0,0,0,0],cycle:-1,updatetime:0,updatecount:-1,updatecount_data:[0,0,0,0,0,0,0,0]},onrec_time:0,timecnt:0,myStyle:"RGB(10,0,200)",id_num:0,sort_direction_id:1,sort_direction_dlc:1,sort_direction_time:1,sort_direction_str:["↑↓","↑↓","↑↓"],sort_target:-1,sort_target_str:["ID","dlc","time"],sort_cnt:0,connect_status:-1,toggle_sort:!1,toggle_rx_msg:!1,toggle_hex:!1,idfilter_val:"",idfilter_list:[],enable_rx_msg:!0,lastInterval:0}},mounted(){setInterval(this.intervalFunc1000,500),setInterval(this.intervalFunc3000,3e3),console.log("Starting connection to WebSocket Server");for(let t=0;t<2047;t++)this.can_msg.id=-1,this.can_msgs[t]=Object.assign({},this.can_msg);this.websocketconnect()},computed:{},methods:{toggleDecOrHex:function(t){if(null==t)return"";if(""==t)return"";let e=Number(t);return this.toggle_hex?e.toString(16):e},colorStr:function(t){var e=2*t;e>10&&(e=10);var s=e.toString(16);return"#"+s+s+s},sortTargetStr:function(){return this.sort_target>=0?this.sort_target_str[this.sort_target]:"(未)"},websocketconnect:function(){this.connection=new y.Z("ws://192.168.10.108:81/",null,{debug:!1,reconnectInterval:3e3}),this.connection.onmessage=t=>{let e=new Date;if(e.getTime()-this.lastInterval>2e3?this.enable_rx_msg=!1:this.enable_rx_msg=!0,this.enable_rx_msg&&this.toggle_rx_msg){var s=JSON.parse(t.data)["canmsg"];this.sortOutCanMsg(s)}},this.connection.onopen=function(t){console.log(t),console.log("Successfully connected to the echo websocket server...")}},intervalFunc1000:function(){var t=new Date;this.lastInterval=t.getTime(),this.connect_status=this.connection.readyState,1!=this.connect_status&&console.log(this.connect_status),this.timecnt=this.timecnt+1;for(let i=0;i<this.id_num;i++){var e=new Date,s=(e.getTime()-this.can_msgs[i].updatetime)/1e3;s>this.can_msgs[i].cycle&&(this.can_msgs[i].updatecount=s);for(let t=0;t<this.can_msgs[i].dlc;t++)this.can_msgs[i].updatecount_data[t]=this.can_msgs[i].updatecount_data[t]+1}},intervalFunc3000:function(){this.toggle_sort&&this.sortMsg(this.sort_target,0)},sortOutCanMsg:function(t){let e=!1;for(let r=0;r<this.idfilter_list.length;r++)if(0<this.idfilter_list[r]&&this.idfilter_list[r]<2048){e=!0;break}for(let r=1;r<t.length;r++)if((!e||this.idfilter_list.includes(t[r].id))&&t[r].id>0&&"data"in t[r]){var s,i,n=this.can_msgs.findIndex((e=>e.id===t[r].id));if(i=-1==n?this.id_num:n,s=new Date,this.can_msgs[i].id=t[r].id,this.can_msgs[i].dlc=t[r].dlc,this.can_msgs[i].cycle=t[r].cycle/1e3,this.can_msgs[i].updatetime=s.getTime(),this.can_msgs[i].updatecount=0,-1==n)this.can_msgs[i].updatecount_data=Object.assign({},this.can_msgs[this.id_num].updatecount_data),this.id_num++;else for(let e=0;e<this.can_msgs[i].dlc;e++)this.can_msgs[i].data[e]!=t[r].data[e]&&(this.can_msgs[i].updatecount_data[e]=0);this.can_msgs[i].data=Object.assign({},t[r].data)}},sortFuncId:function(t,e){return t.id<e.id?-1*this.sort_direction_id:t.id>e.id?1*this.sort_direction_id:t.cycle+t.updatecount<e.cycle+e.updatecount?-1*this.sort_direction_time:t.cycle+t.updatecount>e.cycle+e.updatecount?1*this.sort_direction_time:0},sortFuncDlc:function(t,e){return t.dlc<e.dlc?-1*this.sort_direction_dlc:t.dlc>e.dlc?1*this.sort_direction_dlc:t.id<e.id?-1*this.sort_direction_id:t.id>e.id?1*this.sort_direction_id:0},sortFuncTime:function(t,e){return t.cycle+t.updatecount<e.cycle+e.updatecount?-1*this.sort_direction_time:t.cycle+t.updatecount>e.cycle+e.updatecount?1*this.sort_direction_time:t.id<e.id?-1*this.sort_direction_id:t.id>e.id?1*this.sort_direction_id:0},sort_direction_strfunc:function(t){return-1==t?"↓":"↑"},sortMsg:function(t,e){if(-1!=t){if(this.sort_cnt++,this.sort_direction_str=["↑↓","↑↓","↑↓"],0==t){0==this.sort_target&&1==e&&(this.sort_direction_id*=-1);var s=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncId);this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_id)}else 1==t?(1==this.sort_target&&1==e&&(this.sort_direction_dlc*=-1),s=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncDlc),this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_dlc)):(2==this.sort_target&&1==e&&(this.sort_direction_time*=-1),s=this.can_msgs.slice(0,this.id_num).sort(this.sortFuncTime),this.sort_direction_str[t]=this.sort_direction_strfunc(this.sort_direction_time));this.sort_target=t;for(let t=0;t<this.id_num;t++)this.can_msgs[t]=Object.assign({},s[t])}},idFilterInput:function(t){const e=t.split(","),s=[];var i=[];e.forEach((t=>{const e=t.trim().split("-").map((t=>t.startsWith("0x")?parseInt(t,16):parseInt(t,10)));if(1===e.length)s.push(e[0]);else{const t=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);for(let e=t;e<=i;e++)s.push(e)}})),i=s.sort(((t,e)=>t-e)),this.idfilter_list=i,console.log(this.idfilter_list),this.idFilterRun()},idFilterRun:function(){var t=this.enable_rx_msg;this.enable_rx_msg=!1;let e=0;for(let i=0;i<this.id_num;i++)this.idfilter_list.includes(this.can_msgs[i].id)||(this.can_msgs[i]=Object.assign({},this.can_msg),this.can_msgs[i].id=2048,e+=1);console.log(e);var s=this.sort_direction_id;this.sort_direction_id=1,this.sortMsg(0,0),this.sort_direction_id=s,this.id_num=this.id_num-e,this.enable_rx_msg=t}}},w=Z,O=(0,u.Z)(w,b,x,!1,null,null,null),S=O.exports,k=s(9582),I=s(4886),F=s(626),T=s(3595),j=s(867),M=s(4049),D=s(1783),C=function(){var t=this,e=t._self._c;return e(k.Z,[e(D.Z,{attrs:{color:"gray",dark:"",flat:""}},[[e(j.Z,{attrs:{"align-with-title":""},model:{value:t.tabnum,callback:function(e){t.tabnum=e},expression:"tabnum"}},[e(F.Z,[t._v(" Home ")]),e(F.Z,[t._v(" CanRx ")]),e(F.Z,[t._v(" CanTx ")]),e(F.Z,[t._v(" Plot ")]),e(F.Z,[t._v(" Config ")])],1)]],2),e(M.Z,{attrs:{touchless:!0},model:{value:t.tabnum,callback:function(e){t.tabnum=e},expression:"tabnum"}},[e(T.Z,[t._v(" Home ")]),e(T.Z,[e(k.Z,[e(I.ZB,[e("canrecv")],1)],1)],1),e(T.Z,[t._v(" "+t._s(t.tabnum)+" ")])],1)],1)},P=[],R={components:{canrecv:S},data(){return{tabnum:1,items:["web","shopping","videos","images","news"],text:"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.",canrx_url:"/tab?tabnum=1",tab_url:"tab"}},created:function(){this.tabnum=Number(this.$route.query.tabnum)},methods:{goToCanRx(){let t="/tab?tabnum=1";this.$router.push(t)}}},q=R,H=(0,u.Z)(q,C,P,!1,null,null,null),$=H.exports;i.ZP.use(h.ZP);const N=[{path:"/",component:$},{path:"/canrx",component:S},{path:"/tab",component:$},{path:"/cantab",component:$}],A=new h.ZP({mode:"history",base:"/",routes:N});var B=A,E=s(8864);i.ZP.use(E.Z);var L=new E.Z({});i.ZP.config.productionTip=!1,new i.ZP({router:B,vuetify:L,render:t=>t(d)}).$mount("#app")}},e={};function s(i){var n=e[i];if(void 0!==n)return n.exports;var r=e[i]={exports:{}};return t[i](r,r.exports,s),r.exports}s.m=t,function(){var t=[];s.O=function(e,i,n,r){if(!i){var o=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],r=t[u][2];for(var c=!0,a=0;a<i.length;a++)(!1&r||o>=r)&&Object.keys(s.O).every((function(t){return s.O[t](i[a])}))?i.splice(a--,1):(c=!1,r<o&&(o=r));if(c){t.splice(u--,1);var l=n();void 0!==l&&(e=l)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[i,n,r]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,r,o=i[0],c=i[1],a=i[2],l=0;if(o.some((function(e){return 0!==t[e]}))){for(n in c)s.o(c,n)&&(s.m[n]=c[n]);if(a)var u=a(s)}for(e&&e(i);l<o.length;l++)r=o[l],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return s.O(u)},i=self["webpackChunkcan_webapp"]=self["webpackChunkcan_webapp"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=s.O(void 0,[998],(function(){return s(7220)}));i=s.O(i)})();
//# sourceMappingURL=app.cebf783d.js.map